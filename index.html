<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <title>Secure Mail</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
</head>

<body>
    <form id="myform" class="login">
        <i class="fas fa-user-circle fa-4x"></i>
        <h1>Cmail 登入</h1>
        <button id="SubmitButton" type="submit">登入</button>
    </form>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>

    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyAy02ydvSNjQxncVSbCm6SqSMfC6uJi2gQ",
            authDomain: "security-project-cmail.firebaseapp.com",
            databaseURL: "https://security-project-cmail-default-rtdb.firebaseio.com",
            projectId: "security-project-cmail",
            storageBucket: "security-project-cmail.appspot.com",
            messagingSenderId: "1020925604371",
            appId: "1:1020925604371:web:14f6f5689e671261e5c5e6",
            measurementId: "G-XXZR59KCQ2"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>

    <script>
        const provider = new firebase.auth.GoogleAuthProvider();
        let button = document.getElementById("SubmitButton")
        button.addEventListener("click", () => {
            firebase.auth().signInWithRedirect(provider);
        });

        document.addEventListener('DOMContentLoaded', () => {
            firebase.auth().getRedirectResult()
                .then((result) => {
                    if (result.credential) {
                        var credential = result.credential;
                        var token = credential.accessToken;
                    }
                    var user = result.user;
                }).catch((error) => {
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    var email = error.email;
                    var credential = error.credential;
                });
        });

    </Script>

</body>

</html>